server:
  port: 8083
  tomcat:
    connection-timeout: 130s

spring:
  datasource:
    url: jdbc:mysql://${DB_HOST}:3306/${DB_NAME}?useSSL=false&allowPublicKeyRetrieval=true&characterEncoding=utf8&serverTimezone=Asia/Seoul
    username: ${DB_USER}
    password: ${DB_PASSWORD}
    driver-class-name: com.mysql.cj.jdbc.Driver
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        dialect: org.hibernate.dialect.MySQL8Dialect
  main:
    allow-bean-definition-overriding: true
  data:
    redis:
      host: localhost
      port: 6379
  cache:
    type: simple  # 복수 CacheManager 사용하므로 단일자동설정 방지용 (선택)
  profiles:
    active: local

flask:
  server:
    url: http://localhost:5001

naver:
  api:
    client-id: ${NAVER_CLIENT_ID}
    client-secret: ${NAVER_CLIENT_SECRET}
  search:
    queries: ["서산","서산 맛집","서산 카페","서산 행사","서산 소식"]
    regions: ["서산시 전체","대산읍","인지면","부석면","팔봉면","지곡면","성연면","음암면","운산면","해미면","고북면","동문1동","동문2동","수석동","석남동"]

kma:
  api:
    service-key: ${KMA_SERVICE_KEY}
    base-url: "https://apis.data.go.kr/1360000/VilageFcstInfoService_2.0"
    grid-coords:
      - { name: "서산시 전체", nx: 68, ny: 100 }
      - { name: "대산읍", nx: 67, ny: 102 }
      - { name: "인지면", nx: 68, ny: 100 }
      - { name: "부석면", nx: 66, ny: 99 }
      - { name: "팔봉면", nx: 67, ny: 101 }
      - { name: "지곡면", nx: 68, ny: 101 }
      - { name: "성연면", nx: 69, ny: 100 }
      - { name: "음암면", nx: 69, ny: 99 }
      - { name: "운산면", nx: 69, ny: 98 }
      - { name: "해미면", nx: 68, ny: 97 }
      - { name: "고북면", nx: 67, ny: 96 }
      - { name: "동문1동", nx: 68, ny: 99 }
      - { name: "동문2동", nx: 68, ny: 99 }
      - { name: "수석동", nx: 68, ny: 99 }
      - { name: "석남동", nx: 68, ny: 99 }
    city-groups:
      seosan:
        - "해미면"
        - "대산읍"
        - "인지면"
        - "부석면"
        - "팔봉면"
        - "지곡면"
        - "성연면"
        - "음암면"
        - "운산면"
        - "고북면"
        - "동문1동"
        - "동문2동"
        - "수석동"
        - "석남동"



crawler:
  api:
    url: ${CRAWLER_API_URL:http://localhost:5001}

logging:
  level:
    root: INFO
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE

springdoc:
  swagger-ui:
    path: /swagger-ui.html
  api-docs:
    path: /v3/api-docs
  packages-to-scan: org.likelionhsu.backend
  paths-to-match: /api/v1/**, /flask/**

ai:
  prompt:
    mode: strict          # strict | balanced
    max-summary-chars: 120
    one-line-tldr-chars: 28
    banned-phrases:
      - "관련 기사"
      - "이 시각"
      - "오늘의"
      - "키워드"
      - "요약:"
      - "목록:"
      - "프롬프트"
      - "역할:"
      - "목표:"
      - "규칙:"
    stop-sequences: ["관련 기사", "이 시각", "오늘의", "키워드", "요약:", "목록:", "역할:", "목표:", "규칙:", "프롬프트", "\"\"\"", "```", "---"]
  summarizer:
    temperature: 0.2
    top-p: 0.3
    repetition-penalty: 1.18
    max-tokens: 220       # 요구 길이 + 소폭 여유
    min-length-threshold: 280   # 이 글자 수 이하이면 요약 스킵
    enable-post-cleanup: true   # 요약 결과 후처리(노이즈/프롬프트 제거)
    max-output-length: 600      # 결과 요약 상한(선택)